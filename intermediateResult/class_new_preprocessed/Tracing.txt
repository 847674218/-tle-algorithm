licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra trace import java net inet address import java nio byte buffer import java util array import java util map import java util import java util concurr concurr hash map import org slf logger import org slf logger factori import org apach cassandra concurr stage import org apach cassandra concurr stage manag import org apach cassandra config meta data import org apach cassandra cql column builder import org apach cassandra column famili import org apach cassandra consist level import org apach cassandra expir column import org apach cassandra row mutat import org apach cassandra marshal time type import org apach cassandra net messag import org apach cassandra servic storag proxi import org apach cassandra util byte buffer util import org apach cassandra util util import org apach cassandra util gen import org apach cassandra util wrap runnabl import static org apach cassandra util byte buffer util byte trace session context abl track store trace session session usual user initi queri multipl local remot event befor complet event session store tabl public class trace public static final string system trace public static final string event public static final string session public static final string trace session privat static final int privat static trace instanc trace public static final logger logger logger factori logger trace class fetch lazi initi trace context public static trace instanc return instanc privat inet address local address util local address privat final thread local trace state state thread local trace state privat final map trace state session concurr hash map trace state public static void add column column famili byte buffer inet address address add column byte buffer util byte address public static void add column column famili byte buffer int valu add column byte buffer util byte valu public static void add column column famili byte buffer long valu add column byte buffer util byte valu public static void add column column famili byte buffer string valu add column byte buffer util byte valu privat static void add column column famili byte buffer byte buffer valu add column expir column valu system current time milli public void add paramet column column famili map string string raw payload map entri string string entri raw payload entri set add column expir column build metadata byte paramet byte entri key byte entri valu system current time milli public static byte buffer build meta data meta byte buffer arg column builder builder meta def column builder byte buffer arg arg builder add arg return builder build public session assert trace return state session indic current thread execut trace public static boolean trace return instanc null instanc state null public session return session time type instanc compos byte buffer wrap gen time byte public session session assert state null trace state trace state local address session true state set session put session return session public void stop local trace state state state local session remov state session stop session record complet call coodin request complet public void stop session trace state state state state null inlin trace avoid implicit call state logger debug request complet els final int elaps state elaps final byte buffer session byte state session byte stage manag stage stage execut wrap runnabl public void run throw throw meta data meta meta data trace session column famili column famili creat meta add column build meta byte durat elaps row mutat mutat row mutat session byte mutat add storag proxi mutat array list mutat consist level session remov state session state set null public trace state return state public trace state session return session session public void set final trace state tls state set tls public void final string request final map string string paramet assert trace final long start system current time milli final byte buffer session byte state session byte stage manag stage stage execut wrap runnabl public void run throw throw meta data meta meta data trace session column famili column famili creat meta add column build meta byte coordin util broadcast address add column build meta byte request request add column build meta byte start start add paramet column paramet row mutat mutat row mutat session byte mutat add storag proxi mutat array list mutat consist level updat thread queri context messag param messag internod messag public void initi messag final messag messag final byte session byte messag paramet trace messag session context header don trace session byte null state set null return assert session byte length session gen byte buffer wrap session byte trace state session session null trace state messag session fals session put session state set public static void trace string messag trace instanc null instanc built time call return final trace state state trace instanc state null inlin trace avoid implicit call state return state trace messag public static void trace string format object arg trace instanc null instanc built time call return final trace state state trace instanc state null inlin trace avoid implicit call state return state trace format arg public static void trace string format object arg object arg trace instanc null instanc built time call return final trace state state trace instanc state null inlin trace avoid implicit call state return state trace format arg arg public static void trace string format object arg trace instanc null instanc built time call return final trace state state trace instanc state null inlin trace avoid implicit call state return state trace format arg 