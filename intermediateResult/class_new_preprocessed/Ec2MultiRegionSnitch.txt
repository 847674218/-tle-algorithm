licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra locat import java import java net inet address import java net unknown host import org apach cassandra configur import org apach cassandra config databas descriptor import org apach cassandra gms applic state import org apach cassandra gms endpoint state import org apach cassandra gms gossip import org apach cassandra gms endpoint state chang subscrib import org apach cassandra gms version valu import org apach cassandra net messag servic import org apach cassandra servic storag servic snitch automat set public queri snitch set privat gossip applic state snitch implement reset connect region communic privat implement snitch inherit function extend multi region oper node cluster abl modifi secur group set communic public public class multi region snitch extend snitch implement endpoint state chang subscrib privat static final string http latest meta data public ipv privat static final string http latest meta data local ipv privat final inet address public privat final string privat public multi region snitch throw configur super public inet address aw api call logger info snitch public identifi public privat aw api call public broadcast address node databas descriptor set broadcast address public public void join inet address endpoint endpoint state state state applic state applic state null connect endpoint state applic state applic state public void chang inet address endpoint applic state state version valu valu state applic state connect endpoint valu public void aliv inet address endpoint endpoint state state state applic state applic state null connect endpoint state applic state applic state public void dead inet address endpoint endpoint state state noth public void restart inet address endpoint endpoint state state noth public void remov inet address endpoint noth privat void connect inet address endpoint version valu version valu datacent endpoint equal datacent public return noth return tri inet address remot inet address version valu valu messag servic instanc connect pool endpoint reset remot logger debug string format intiat reconnect intern remot endpoint catch unknown host logger error error address resolv overrid public void gossip start super gossip start gossip instanc add local applic state applic state storag servic instanc valu factori intern privat gossip instanc regist 