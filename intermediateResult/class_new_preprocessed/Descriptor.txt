licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra sstabl import java file import java util string token import googl common base object import org apach cassandra util filter factori import org apach cassandra util pair import static org apach cassandra sstabl compon separ tabl describ keyspac column famili data generat higher generat data alphabet version string descriptor mark temporari influenc generat filenam public class descriptor version denot major minor minor version compat field metadata compon field remov size chang minor version introduc version cassandra prior alway increment major version version compat version abov convent follow label public static class version initi sake privat static final string current version public static final version version pre histori ad version sstabl filenam bloom filter compon comput hash raw key byte string row size data compon becom long int store undecor key data index compon switch bloom filter implement data compon track flush context metadata compon track max client timestamp metadata compon record compress ration metadata compon record partition metadata compon includ row tombston maxtimestamp includ ancestor generat metadata compon marker replay posit correspond milli base column index promot index file record estim histogram delet time tombston bloom filter key column upgrad murmur track min client timestamp metadata compon public static final version version current version privat final string version public final boolean string bloom filter public final boolean int row size public final boolean encod key public final boolean latest version public final boolean metadata includ replay posit public final boolean metadata includ modern replay posit public final boolean track max timestamp public final boolean track min timestamp public final boolean compress ratio public final boolean partition public final boolean track tombston public final boolean promot index public final filter factori type filter type public final boolean ancestor public version string version version version string bloom filter version compar int row size version compar encod key version compar metadata includ replay posit version compar compress ratio version compar partition version compar track max timestamp version compar track min timestamp version compar ancestor version compar metadata includ modern replay posit version compar track tombston version compar promot index version compar latest version version compar current version version compar filter type filter factori type els version compar filter type filter factori type els filter type filter factori type param ver tabl version return true version string match format version static boolean valid string ver return ver null ver match public boolean compat return version char version char public boolean stream compat add compat earlier version singl pass stream tabl writer append stream version earlier don messag servic version awar point return compat version char version timestamp valu comput incorrect ignor row tombston timestamp return true timestamp valu metadata file actual correct timestamp track max timestamp public boolean timestamp return version compar overrid public string string return version overrid public boolean equal object return true instanceof version return fals return version equal version version overrid public int hash code return version hash code public final file directori version follow format code code public final version version public final string ksname public final string cfname public final int generat public final boolean temporari privat final int hash code descriptor assum public descriptor file directori string ksname string cfname int generat boolean temp version directori ksname cfname generat temp public descriptor string version file directori string ksname string cfname int generat boolean temp version version directori ksname cfname generat temp public descriptor version version file directori string ksname string cfname int generat boolean temp assert version null directori null ksname null cfname null version version directori directori ksname ksname cfname cfname generat generat temporari temp hash code object hash code directori generat ksname cfname public descriptor generat int generat return descriptor version directori ksname cfname generat temporari public string filenam compon compon return filenam compon public string base filenam string builder buff string builder buff append directori append file separ char buff append ksname append separ buff append cfname append separ temporari buff append tabl append separ version equal version buff append version append separ buff append generat return buff string param suffix compon suffix data index return filenam descriptor suffix public string filenam string suffix return base filenam separ suffix filenam file directori string param filenam tabl filenam return descriptor tabl initi filenam public static descriptor filenam string filenam file file file filenam return filenam file parent file file left filenam form ksname cfname tmp version gen compon param directori directori tabl file param tabl file return descriptor tabl compon remaind public static pair descriptor string filenam file directori string token filenam string token string token string valu separ string nexttok filenam start keyspac column famili string ksname token string cfname token option temporari marker nexttok token boolean temporari fals nexttok equal tabl temporari true nexttok token option version string version version version version valid nexttok version version nexttok nexttok token int generat integ pars int nexttok compon suffix string compon token directori directori null directori file return pair creat descriptor version directori ksname cfname generat temporari compon param temporari temporari flag return clone descriptor temporari status public descriptor temporari boolean temporari return descriptor version directori ksname cfname generat temporari return true current cassandra version read sstabl version public boolean compat return version compat return true current cassandra version stream sstabl version anoth node stricter open local compat becaus stream rebuild data compon onli write latest version public boolean stream compat return version stream compat overrid public string string return base filenam overrid public boolean equal object return true instanceof descriptor return fals descriptor descriptor return directori equal directori generat generat ksname equal ksname cfname equal cfname overrid public int hash code return hash code 