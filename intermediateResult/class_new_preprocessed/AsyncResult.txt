licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra net import java net inet address import java util concurr time unit import java util concurr timeout import java util concurr atom atom boolean import java util concurr lock condit import java util concurr lock lock import java util concurr lock reentrant lock class async result implement async result privat result privat final atom boolean atom boolean fals privat final lock lock reentrant lock privat final condit condit privat final long start time privat inet address public async result condit lock condit start time system current time milli public long timeout time unit throw timeout lock lock tri boolean val true tri timeout time unit convert timeout long overal timeout timeout system current time milli start time val overal timeout condit await overal timeout time unit catch interrupt throw assert error val throw timeout oper time final lock unlock return result public void result messag respons tri lock lock respons result respons payload set true condit signal final lock unlock public boolean latenc snitch return fals public inet address return 