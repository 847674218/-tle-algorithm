licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra util import java import java lang reflect invoc target import java lang reflect method import java nio map byte buffer import java text decim format import java util array import org slf logger import org slf logger factori import org apach cassandra config databas descriptor import org apach cassandra blacklist directori import org apach cassandra tabl import org apach cassandra error import org apach cassandra read error import org apach cassandra write error import org apach cassandra servic storag servic import org apach cassandra util librari public class file util privat static final logger logger logger factori logger file util class privat static final doubl privat static final doubl privat static final doubl privat static final doubl privat static final decim format decim format privat static final method cleaner method static method tri class sun nio direct buffer method cleaner catch perhap sun deriv contribut welcom logger info initi mmaper compact data file remov prompt consid standard disk access mode null cleaner method public static void creat hard link file file exist throw runtim tri creat duplic hard link exist throw runtim tri hard link file doe exist tri librari creat hard link catch throw write error public static file creat temp file string prefix string suffix file directori tri return file creat temp file prefix suffix directori catch throw write error directori public static file creat temp file string prefix string suffix return creat temp file prefix suffix file system properti java tmpdir public static void delet confirm string file delet confirm file file public static void delet confirm file file assert file exist attempt delet exist file file logger debug enabl logger debug delet file file delet throw write error fail delet file absolut path file public static void renam confirm string string file renam file public static void renam confirm string string renam confirm file file public static void renam confirm file file assert exist logger debug enabl logger debug string format renam path path becaus usual becaus didn close file befor renam window picki renam throw runtim string format fail renam path path public static void truncat string path long size random access file file tri file random access file path catch file throw runtim tri file channel truncat size catch throw write error path final close quiet file public static void close quiet closeabl tri null close catch logger warn fail close public static void close closeabl throw close array list public static void close iter extend closeabl throw null closeabl tri null close catch logger warn fail close stream null throw public static string canon path string filenam tri return file filenam canon path catch throw read error filenam public static string canon path file file tri return file canon path catch throw read error file public static boolean cleaner avail return cleaner method null public static void clean map byte buffer buffer tri object cleaner cleaner method invok buffer cleaner class method clean invok cleaner catch illeg access throw runtim catch invoc target throw runtim catch method throw runtim public static void creat directori string directori creat directori file directori public static void creat directori file directori directori exist directori mkdir throw write error fail mkdir directori directori public static boolean delet string file file file file return delet public static void delet file file file file file file delet public static void delet async final string file runnabl runnabl runnabl public void run delet confirm file file storag servic task execut runnabl public static string stringifi file size doubl valu doubl valu valu string val format return val els valu valu string val format return val els valu valu string val format return val els valu valu string val format return val els string val format valu return val byte delet file subdirectori dir param dir directori delet throw write error ani part tree delet public static void delet recurs file dir dir directori string children dir list string child children delet recurs file dir child directori empti smoke delet confirm dir public static void skip byte fulli data input int byte throw int byte int skip skip byte byte skip throw byte byte skip public static void skip byte fulli data input long byte throw long byte int int math min integ byte int skip skip byte skip throw byte byte skip public static void handl error error switch databas descriptor disk failur polici case stop logger error stop gossip server storag servic instanc stop gossip storag servic instanc stop server break case effort read write error mark path unwrit blacklist directori mayb mark unwrit path instanceof read error file directori blacklist directori mayb mark unread path directori null tabl remov unread tabl directori break case ignor alreadi log left noth break default throw illeg state 