licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra sstabl import java import java util import org apach cassandra util stream histogram import org slf logger import org slf logger factori import org apach cassandra commitlog replay posit import org apach cassandra util file util import org apach cassandra util estim histogram metadata tabl metadata includ estim row size histogram estim column count histogram replay posit max column timestamp compress ratio partition generat sstabl sstabl compact ani tombston drop time histogram tabl metadata instanti collector open descriptor creat default instanc public class tabl metadata public static final doubl public static final tabl metadata serial serial tabl metadata serial public final estim histogram estim row size public final estim histogram estim column count public final replay posit replay posit public final long min timestamp public final long max timestamp public final doubl compress ratio public final string partition public final set integ ancestor public final stream histogram estim tombston drop time privat tabl metadata default row size histogram default column count histogram replay posit long long null collect integ empti set default tombston drop time histogram privat tabl metadata estim histogram row size estim histogram column count replay posit replay posit long min timestamp long max timestamp doubl string partition set integ ancestor stream histogram estim tombston drop time estim row size row size estim column count column count replay posit replay posit min timestamp min timestamp max timestamp max timestamp compress ratio partition partition ancestor ancestor estim tombston drop time estim tombston drop time public static tabl metadata creat default instanc return tabl metadata public static collector creat collector return collector static estim histogram default column count histogram track max valu column return estim histogram static estim histogram default row size histogram track max valu return estim histogram static stream histogram default tombston drop time histogram return stream histogram tabl param befor return estim droppabl tombston ratio befor time public doubl estim droppabl tombston ratio int befor long estim column count estim column count estim column count count estim column count doubl droppabl droppabl tombston befor befor return droppabl estim column count return amount droppabl tombston param befor time return amount droppabl tombston public doubl droppabl tombston befor int befor return estim tombston drop time sum befor public static class collector protect estim histogram estim row size default row size histogram protect estim histogram estim column count default column count histogram protect replay posit replay posit replay posit protect long min timestamp long protect long max timestamp long protect doubl compress ratio protect set integ ancestor hash set integ protect stream histogram estim tombston drop time default tombston drop time histogram public void add row size long row size estim row size add row size public void add column count long column count estim column count add column count public void merg tombston histogram stream histogram histogram estim tombston drop time merg histogram ratio compress uncompress compress isn public void add compress ratio long compress long uncompress compress ratio doubl compress uncompress public void updat min timestamp long potenti min min timestamp math min min timestamp potenti min public void updat max timestamp long potenti max max timestamp math max max timestamp potenti max public tabl metadata final metadata string partition return tabl metadata estim row size estim column count replay posit min timestamp max timestamp compress ratio partition ancestor estim tombston drop time public collector estim row size estim histogram estim row size estim row size estim row size return public collector estim column count estim histogram estim column count estim column count estim column count return public collector replay posit replay posit replay posit replay posit replay posit return public collector add ancestor int generat ancestor add generat return void updat long size column stat stat updat min timestamp stat min timestamp max timestamp alway collect precis row max timestamp return long avoid deseri echo row reason whi collect call column famili store creat compact writer howev sstabl timestamp updat timestamp case echo row sinc compact control deseri true updat max timestamp stat max timestamp add row size size add column count stat column count merg tombston histogram stat tombston histogram public static class tabl metadata serial privat static final logger logger logger factori logger tabl metadata serial class public void serial tabl metadata sstabl stat data output dos throw assert sstabl stat partition null estim histogram serial serial sstabl stat estim row size dos estim histogram serial serial sstabl stat estim column count dos replay posit serial serial sstabl stat replay posit dos dos write long sstabl stat min timestamp dos write long sstabl stat max timestamp dos write doubl sstabl stat compress ratio dos write sstabl stat partition dos write int sstabl stat ancestor size integ sstabl stat ancestor dos write int stream histogram serial serial sstabl stat estim tombston drop time dos public tabl metadata deseri descriptor descriptor throw logger debug load metadata descriptor file stat file file descriptor filenam tabl stat file exist logger debug sstabl stat descriptor return tabl metadata data input stream dis data input stream buffer input stream file input stream stat file tri return deseri dis descriptor final file util close quiet dis public tabl metadata deseri data input stream dis descriptor desc throw estim histogram row size estim histogram serial deseri dis estim histogram column count estim histogram serial deseri dis replay posit replay posit desc version metadata includ replay posit replay posit serial deseri dis replay posit desc version metadata includ modern replay posit replay posit futur older version generat nanotim don omit replay someth replay posit replay posit long min timestamp desc version track min timestamp dis read long long desc version track min timestamp min timestamp long long max timestamp desc version timestamp dis read long long desc version track max timestamp javadoc descriptor timestamp max timestamp long doubl compress ratio desc version compress ratio dis read doubl string partition desc version partition dis read null int ancestor desc version ancestor dis read int set integ ancestor hash set integ ancestor int ancestor ancestor add dis read int stream histogram tombston histogram desc version track tombston stream histogram serial deseri dis default tombston drop time histogram return tabl metadata row size column count replay posit min timestamp max timestamp compress ratio partition ancestor tombston histogram 