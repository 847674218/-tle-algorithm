licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra util import java util map import java util set import java util concurr concurr hash map import java util concurr concurr map import java util concurr schedul executor servic import java util concurr time unit import googl common base function import org slf logger import org slf logger factori import org apach cassandra concurr debugg schedul thread pool executor public class expir map privat static final logger logger logger factori logger expir map class privat volatil boolean shutdown public static class cacheabl object public final valu public final long timeout privat final long creat privat cacheabl object valu long timeout assert valu null valu valu timeout timeout creat system current time milli privat boolean readi die long time return time creat timeout expir map add multipl thread executor privat static final schedul executor servic servic debugg schedul thread pool executor privat final concurr map cacheabl object cach concurr hash map cacheabl object privat final long default expir public expir map long default expir default expir null param default expir object cach millisecond public expir map long default expir final function pair cacheabl object post expir hook default expir default expir default expir throw illeg argument argument specifi posit number runnabl runnabl runnabl public void run long start system current time milli int map entri cacheabl object entri cach entri set entri valu readi die start cach remov entri key post expir hook null post expir hook appli pair creat entri key entri valu logger trace expir entri servic schedul fix delay runnabl default expir default expir time unit public void shutdown block servic shutdown tri servic await termin default expir time unit catch interrupt throw assert error public void reset shutdown fals cach clear public put key valu return put key valu default expir public put key valu long timeout shutdown storag proxi isn equip deal nomin aliv send ani messag sit thread rest server shutdown complet comment custom thread pool server serv tri thread sleep long catch interrupt throw assert error cacheabl object previous cach put key cacheabl object valu timeout return previous null null previous valu public key cacheabl object cach key return null null valu public remov key cacheabl object cach remov key return null null valu public long age key cacheabl object cach key return null creat public int size return cach size public boolean key key return cach key key public boolean empti return cach empti public set key set return cach key set 