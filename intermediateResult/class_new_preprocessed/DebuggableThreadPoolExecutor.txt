licens apach softwar foundat contributor licens agreement file distribut work addit inform regard copyright ownership licens file apach licens version licens file complianc licens obtain copi licens http www apach org licens requir applic law agre write softwar distribut licens distribut express impli licens specif languag govern permiss limit licens packag org apach cassandra concurr import java util concurr import org slf logger import org slf logger factori import org apach cassandra trace trace state import org apach cassandra trace trace import static org apach cassandra trace trace trace class encorpor executor practic cassandra executor system extend main improv vanilla task throw default uncaught handler invok handler log maximum pool size support quot javadoc core pool size thread run executor alway prefer ad thread queu core pool size thread run executor alway prefer queu request ad thread request queu thread creat exceed maximum pool size case task reject don stage creat thread queue full needless difficult reason system behavior word debugg alloc maximum number core thread queue full enqueuer block number thread drop stage busi core thread timeout enabl public class debugg thread pool executor extend thread pool executor protect static final logger logger logger factori logger debugg thread pool executor class public static final reject execut handler block execut handler reject execut handler public void reject execut runnabl task thread pool executor executor debugg thread pool executor executor initi reject task block queue runnabl queue executor queue true executor shutdown debugg thread pool executor executor final reject task throw reject execut thread pool executor shut tri queue offer task time unit debugg thread pool executor executor final accept task break catch interrupt throw assert error public debugg thread pool executor string thread pool int prioriti integ time unit link block queue runnabl thread factori thread pool prioriti public debugg thread pool executor int core pool size long aliv time time unit unit block queue runnabl queue thread factori factori core pool size core pool size aliv time unit queue factori public debugg thread pool executor int core pool size int maximum pool size long aliv time time unit unit block queue runnabl work queue thread factori thread factori super core pool size maximum pool size aliv time unit work queue thread factori core thread time true block task submiss queue room fight design bit becaus reject queue offer report full queue overrid handler retri ugli effect extens analysi option http today java net pub today creat notifi block thread pool executor html set reject execut handler block execut handler return thread pool executor fix number thread thread activ execut task task queu thread expect idl time prefer creat max size param thread pool thread creat executor param size fix number thread executor return debugg thread pool executor public static debugg thread pool executor creat fix pool size string thread pool int size return creat maximum pool size thread pool size integ time unit return thread pool executor fix maximum number thread thread termin idl long thread activ execut task task queu param thread pool thread creat executor param size maximum number thread executor param aliv time time idl thread aliv befor termin param unit tht time unit code aliv time return debugg thread pool executor public static debugg thread pool executor creat maximum pool size string thread pool int size int aliv time time unit unit return debugg thread pool executor size integ aliv time unit link block queue runnabl thread factori thread pool protect void initi reject runnabl task protect void final accept runnabl task protect void final reject runnabl task execut doe call task overrid public void execut runnabl command super execut trace command instanceof trace session wrapper trace session wrapper object command null command overrid protect runnabl futur task runnabl runnabl result trace runnabl instanceof trace session wrapper return trace session wrapper runnabl result return super task runnabl result overrid protect runnabl futur task callabl callabl trace callabl instanceof trace session wrapper return trace session wrapper callabl return super task callabl overrid protect void execut runnabl throwabl super execut instanceof trace session wrapper trace session wrapper tsw trace session wrapper reset trace state presenc denot current thread trace left thread start trace unrel task tsw reset log execut overrid protect void befor execut thread runnabl instanceof trace session wrapper trace session wrapper setup context super befor execut send param ani wrap param default uncaught handler log set public static void log execut runnabl throwabl throwabl hidden throwabl extract throwabl hidden throwabl null handl log hidden throwabl thread pool executor throw thrown task default uncaught handler onli anyth handler isn set null thread default uncaught handler null handl log send param default uncaught handler log set public static void handl log throwabl thread default uncaught handler null logger error error thread pool executor els thread default uncaught handler uncaught thread current thread return ani wrap param runnabl futur task public static throwabl extract throwabl runnabl runnabl check wrap futur task call caus throw ani save complic call schedul futur task block task cancel henc extra check runnabl instanceof futur futur runnabl tri futur runnabl catch interrupt throw assert error catch cancel logger debug task cancel catch execut return caus return null wrap runnabl callabl pass submit execut clone trace session context move worker thread param privat static class trace session wrapper extend futur task privat final trace state state public trace session wrapper runnabl runnabl result super runnabl result state trace instanc public trace session wrapper callabl callabl super callabl state trace instanc privat void setup context trace instanc set state privat void reset trace instanc set null 