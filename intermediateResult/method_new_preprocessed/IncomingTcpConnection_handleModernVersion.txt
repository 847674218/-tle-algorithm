privat void handl modern version int version int header throw data output stream data output stream socket output stream write int messag servic current version flush data input stream data input stream socket input stream int max version read int compact endpoint serial helper deseri boolean compress messag servic bit header compress logger debug upgrad incom connect compress data input stream snappi input stream socket input stream els data input stream buffer input stream socket input stream logger debug max version max version version messag servic current version save endpoint gossip reconnect gossip instanc add save endpoint logger info receiv messag newer protocol version ignor version return messag servic instanc set version math min messag servic current version max version logger debug set version math min messag servic current version max version outbound side reconnect necessari upgrad version true messag servic valid magic read int receiv messag version 