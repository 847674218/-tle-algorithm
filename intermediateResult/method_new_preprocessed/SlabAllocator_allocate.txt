public byte buffer alloc int size true int offset free offset offset region doesn data alloc sinc current region alloc spin loop shouldn spin long thread yield continu offset size data capac capac remain return null tri atom claim region free offset compar set offset offset size alloc alloc count increment return byte buffer data duplic posit offset limit offset size race lost alloc tri 