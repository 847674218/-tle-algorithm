overrid public void messag receiv channel handler context ctx messag event assert messag instanceof messag expect messag messag messag instanceof respons throw protocol invalid respons messag receiv expect request request request request messag tri assert request connect instanceof server connect server connect connect server connect request connect connect valid messag request type logger debug receiv request respons respons request execut connect queri state request stream respons set stream request stream respons attach connect connect appli state transit request type respons type logger debug respond respons ctx channel write respons catch don propag caught assign stream ctx channel write error messag set stream request stream 