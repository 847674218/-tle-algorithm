public void run compact lock write lock lock tri replay posit replay main discard tabl truncat secondari index index main index manag index index truncat truncat system tabl save truncat posit main replay row cach key key cach servic instanc row cach key set key main metadata cach servic instanc row cach remov key final compact lock write lock unlock 