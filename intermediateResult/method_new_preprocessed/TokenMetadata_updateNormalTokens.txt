public void updat normal token multimap inet address token endpoint token endpoint token empti return lock write lock lock tri boolean sort token fals inet address endpoint endpoint token key set collect token token endpoint token endpoint assert token null token empti bootstrap token remov valu endpoint token endpoint map remov valu endpoint topolog add endpoint endpoint leav endpoint remov endpoint remov move endpoint remov endpoint move token token token inet address prev token endpoint map put token endpoint endpoint equal prev prev null logger warn token token chang ownership prev endpoint sort token true sort token sort token sort token final lock write lock unlock 