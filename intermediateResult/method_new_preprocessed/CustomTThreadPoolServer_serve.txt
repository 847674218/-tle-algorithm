public void serv tri server transport listen catch transport ttx logger error error occur dure listen ttx return stop fals stop block max client activ client arg max worker thread tri thread sleep catch interrupt throw assert error tri transport client server transport accept activ client increment worker process worker process client executor servic execut catch transport ttx ttx caus instanceof socket timeout thrift suck continu stop logger warn transport error occur dure accept messag ttx activ client arg max worker thread logger warn maximum number client arg max worker thread reach executor servic shutdown thrift default shutdown wait worker process thread complet becaus client hold shutdown hostag simpli send anoth messag stop call sinc process block indefinit tri read meessag header fix updat thrift set socket timeout client connect toler unintent timeout stop set requir deep chang code generat simpli set thread daemon custom clean thread pool ignor shutdown good rememb goal shutdown necessarili client request receiv answer redirect client differ coordin updat ack success generat hint ani respons replica quick stop accept client connect shutdown continu wait worker process thread accomplish messag servic shutdown method care 